<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Ldbws::Service - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>



  <ul class="link-list" role="directory">
              <li>      <a href="#class-Ldbws::Service-label-Usage+example">Usage example</a>
          <li>      <a href="#class-Ldbws::Service-label-Side+note">Side note</a>

  </ul>
</div>


  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link">Object
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-get_arr_board_with_details">#get_arr_board_with_details</a>
    <li ><a href="#method-i-get_arr_dep_board_with_details">#get_arr_dep_board_with_details</a>
    <li ><a href="#method-i-get_arrival_board">#get_arrival_board</a>
    <li ><a href="#method-i-get_arrival_board_with_details">#get_arrival_board_with_details</a>
    <li ><a href="#method-i-get_arrival_departure_board">#get_arrival_departure_board</a>
    <li ><a href="#method-i-get_arrival_departure_board_with_details">#get_arrival_departure_board_with_details</a>
    <li ><a href="#method-i-get_dep_board_with_details">#get_dep_board_with_details</a>
    <li ><a href="#method-i-get_departure_board">#get_departure_board</a>
    <li ><a href="#method-i-get_departure_board_with_details">#get_departure_board_with_details</a>
    <li ><a href="#method-i-get_fastest_departures_with_details">#get_fastest_departures_with_details</a>
    <li ><a href="#method-i-get_next_departures">#get_next_departures</a>
    <li ><a href="#method-i-get_next_departures_with_details">#get_next_departures_with_details</a>
    <li ><a href="#method-i-get_service_details">#get_service_details</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Ldbws::Service">
  <h1 id="class-Ldbws::Service" class="class">
    class Ldbws::Service
  </h1>

  <section class="description">
    
<p>A wrapper around the National Rail Live Departure Boards Webservice (LDBWS) API.</p>

<p>API methods are pretty much as-specified in <a href="https://lite.realtime.nationalrail.co.uk/openldbws/">the documentation</a>, although methods on this class are specified using snake_case rather than the CamelCase used in the web service.</p>

<h3 id="class-Ldbws::Service-label-Usage+example">Usage example<span><a href="#class-Ldbws::Service-label-Usage+example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>TL;DR:</p>

<pre class="ruby"><span class="ruby-identifier">service</span> = <span class="ruby-identifier">new</span> <span class="ruby-constant">Ldbws</span><span class="ruby-operator">::</span><span class="ruby-constant">Service</span>( <span class="ruby-string">&quot;YOUR-API-TOKEN&quot;</span> )
<span class="ruby-identifier">departures</span> = <span class="ruby-identifier">service</span>.<span class="ruby-identifier">get_departure_board</span>( <span class="ruby-value">crs:</span> <span class="ruby-string">&quot;CDF&quot;</span> )
</pre>

<p>Will furnish you with a list of all departures from Cardiff Central. Other methods work pretty much as you’d expect if you’ve any familiarity with the service. Individual requests use <a href="Request.html"><code>Request</code></a> objects to validate input parameters, and this is noted below. See the corresponding request object for each method for further information as to the parameters.</p>

<h3 id="class-Ldbws::Service-label-Side+note">Side note<span><a href="#class-Ldbws::Service-label-Side+note">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The official documentation for this web service is… lacking. While an attempt has been made to elucidate on both the request parameters and response properties, it shouldn’t be taken as any kind of source of truth. Caveat emptor.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">





     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(token)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Creates a service object.</p>

<h3 id="method-c-new-label-Parameters">Parameters<span><a href="#method-c-new-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt>token
<dd>
<p>the API token used to connect to the service</p>
</dd></dl>

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">token</span>)
  <span class="ruby-ivar">@token</span> = <span class="ruby-identifier">token</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-get_arr_board_with_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arr_board_with_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a detailed station arrival board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoardWithDetails.html">GetStationBoardWithDetails</a>, returns a <a href="ResponseTypes/StationBoardWithDetails.html">StationBoardWithDetails</a> object.</p>

          <div class="method-source-code" id="get_arr_board_with_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_arr_board_with_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetArrBoardWithDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoardWithDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Service.html#method-i-get_arrival_board_with_details">get_arrival_board_with_details</a>
        </div>

      </div>

      <div id="method-i-get_arr_dep_board_with_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arr_dep_board_with_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a detailed station arrival + departures board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoardWithDetails.html">GetStationBoardWithDetails</a>, returns a <a href="ResponseTypes/StationBoardWithDetails.html">StationBoardWithDetails</a> object.</p>

          <div class="method-source-code" id="get_arr_dep_board_with_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_arr_dep_board_with_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetArrDepBoardWithDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoardWithDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Service.html#method-i-get_arrival_departure_board_with_details">get_arrival_departure_board_with_details</a>
        </div>

      </div>

      <div id="method-i-get_arrival_board" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arrival_board</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a station arrival board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoard.html">GetStationBoard</a>, returns a <a href="ResponseTypes/StationBoard.html">StationBoard</a> object.</p>

          <div class="method-source-code" id="get_arrival_board-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_arrival_board</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2012-01-13/ldb/GetArrivalBoard&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_arrival_board_with_details" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arrival_board_with_details</span><span
              class="method-args">(params)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Service.html#method-i-get_arr_board_with_details">get_arr_board_with_details</a>
        </div>
      </div>

      <div id="method-i-get_arrival_departure_board" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arrival_departure_board</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a station arrival + departure board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoard.html">GetStationBoard</a>, returns a <a href="ResponseTypes/StationBoard.html">StationBoard</a> object.</p>

          <div class="method-source-code" id="get_arrival_departure_board-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_arrival_departure_board</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2012-01-13/ldb/GetArrivalDepartureBoard&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_arrival_departure_board_with_details" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_arrival_departure_board_with_details</span><span
              class="method-args">(params)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Service.html#method-i-get_arr_dep_board_with_details">get_arr_dep_board_with_details</a>
        </div>
      </div>

      <div id="method-i-get_dep_board_with_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_dep_board_with_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a detailed station departure board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoardWithDetails.html">GetStationBoardWithDetails</a>, returns a <a href="ResponseTypes/StationBoardWithDetails.html">StationBoardWithDetails</a> object.</p>

          <div class="method-source-code" id="get_dep_board_with_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_dep_board_with_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetDepBoardWithDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoardWithDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Service.html#method-i-get_departure_board_with_details">get_departure_board_with_details</a>
        </div>

      </div>

      <div id="method-i-get_departure_board" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_departure_board</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves a station departure board.</p>

<p>Parameters are validated using <a href="Request/GetStationBoard.html">GetStationBoard</a>, returns a <a href="ResponseTypes/StationBoard.html">StationBoard</a> object.</p>

          <div class="method-source-code" id="get_departure_board-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_departure_board</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2012-01-13/ldb/GetDepartureBoard&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetStationBoard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_departure_board_with_details" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_departure_board_with_details</span><span
              class="method-args">(params)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Service.html#method-i-get_dep_board_with_details">get_dep_board_with_details</a>
        </div>
      </div>

      <div id="method-i-get_fastest_departures_with_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_fastest_departures_with_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves detailed information about the fastest departures from one station to one or many others.</p>

<p>Parameters are validated using <a href="Request/GetDeparturesBoardWithDetails.html">GetDeparturesBoardWithDetails</a>, returns a <a href="ResponseTypes/DeparturesBoardWithDetails.html">DeparturesBoardWithDetails</a> object.</p>

          <div class="method-source-code" id="get_fastest_departures_with_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_fastest_departures_with_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetFastestDeparturesWithDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetDeparturesBoardWithDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_next_departures" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_next_departures</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves the next departures from one station to one or many others.</p>

<p>Parameters are validated using <a href="Request/GetDeparturesBoard.html">GetDeparturesBoard</a>, returns a <a href="ResponseTypes/DeparturesBoard.html">DeparturesBoard</a> object.</p>

          <div class="method-source-code" id="get_next_departures-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 113</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_next_departures</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetNextDepartures&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetDeparturesBoard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_next_departures_with_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_next_departures_with_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves detailed information about the next departures from one station to one or many others.</p>

<p>Parameters are validated using <a href="Request/GetDeparturesBoardWithDetails.html">GetDeparturesBoardWithDetails</a>, returns a <a href="ResponseTypes/DeparturesBoardWithDetails.html">DeparturesBoardWithDetails</a> object.</p>

          <div class="method-source-code" id="get_next_departures_with_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_next_departures_with_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2015-05-14/ldb/GetNextDeparturesWithDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetDeparturesBoardWithDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_service_details" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">get_service_details</span><span
              class="method-args">(params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Retrieves information about a specific service.</p>

<p>Parameters are validated using <a href="Request/GetServiceDetails.html">GetServiceDetails</a>, returns a <a href="ResponseTypes/ServiceDetails.html">ServiceDetails</a> object.</p>

          <div class="method-source-code" id="get_service_details-source">
            <pre><span class="ruby-comment"># File lib/ldbws/service.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_service_details</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">request</span>(
    <span class="ruby-string">&quot;http://thalesgroup.com/RTTI/2012-01-13/ldb/GetServiceDetails&quot;</span>,
    <span class="ruby-constant">Request</span><span class="ruby-operator">::</span><span class="ruby-constant">GetServiceDetails</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.5.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

